{"ast":null,"code":"import _objectSpread from\"C:/Users/LENOVO/Downloads/front2/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useState,useEffect}from\"react\";import{toast}from\"react-toastify\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function AlertSystem(_ref){let{petData,selectedPet}=_ref;const[alerts,setAlerts]=useState([]);useEffect(()=>{if(petData&&petData.length>0){checkAlerts(petData[0]);}},[petData]);const checkAlerts=latestData=>{const newAlerts=[];// Kiểm tra pin yếu\nif(latestData.batteryLevel<20){newAlerts.push({type:\"battery\",message:\"Pin th\\u1EA5p: \".concat(latestData.batteryLevel,\"%\"),level:\"warning\"});}// Kiểm tra ra khỏi vùng an toàn (demo)\nconst safeZoneCenter=[10.8231,106.6297];const distance=calculateDistance(safeZoneCenter[0],safeZoneCenter[1],latestData.latitude,latestData.longitude);if(distance>0.5){newAlerts.push({type:\"location\",message:\"Pet ra khỏi vùng an toàn!\",level:\"danger\"});}// Hiển thị alert mới\nnewAlerts.forEach(alert=>{if(!alerts.find(a=>a.type===alert.type&&a.message===alert.message)){toast[alert.level===\"danger\"?\"error\":\"warning\"](alert.message);setAlerts(prev=>[...prev,_objectSpread(_objectSpread({},alert),{},{id:Date.now()})]);}});};const calculateDistance=(lat1,lon1,lat2,lon2)=>{const R=6371;const dLat=(lat2-lat1)*Math.PI/180;const dLon=(lon2-lon1)*Math.PI/180;const a=Math.sin(dLat/2)*Math.sin(dLat/2)+Math.cos(lat1*Math.PI/180)*Math.cos(lat2*Math.PI/180)*Math.sin(dLon/2)*Math.sin(dLon/2);const c=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));return R*c;};const removeAlert=id=>{setAlerts(prev=>prev.filter(alert=>alert.id!==id));};return/*#__PURE__*/_jsxs(\"div\",{className:\"alert-system\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uD83D\\uDEA8 Th\\xF4ng b\\xE1o\"}),alerts.length===0?/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:\"center\",padding:\"40px 20px\",color:\"#718096\"},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:\"3rem\",marginBottom:\"10px\"},children:\"\\u2705\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Kh\\xF4ng c\\xF3 c\\u1EA3nh b\\xE1o n\\xE0o\"}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:\"14px\",marginTop:\"5px\"},children:\"M\\u1ECDi th\\u1EE9 \\u0111\\u1EC1u \\u1ED5n \\u0111\\u1ECBnh\"})]}):/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",flexDirection:\"column\",gap:\"12px\"},children:alerts.map(alert=>/*#__PURE__*/_jsxs(\"div\",{className:\"alert-item \".concat(alert.level===\"danger\"?\"alert-danger\":\"alert-warning\"),children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"alert-message\",children:alert.message}),/*#__PURE__*/_jsx(\"div\",{className:\"alert-time\",children:new Date().toLocaleTimeString()})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>removeAlert(alert.id),className:\"alert-close\",children:\"\\u2715\"})]},alert.id))})]});}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}