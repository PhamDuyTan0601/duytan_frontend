{"ast":null,"code":"import axios from\"axios\";// ===============================\n// üåê CONFIG\n// ===============================\nconst API_URL=process.env.REACT_APP_API_URL||\"https://pettracking2.onrender.com\";// ===============================\n// üë§ USER APIs\n// ===============================\n// ƒêƒÉng k√Ω t√†i kho·∫£n\nexport const registerUser=userData=>axios.post(\"\".concat(API_URL,\"/api/users/register\"),userData);// ƒêƒÉng nh·∫≠p\nexport const loginUser=async userData=>{const response=await axios.post(\"\".concat(API_URL,\"/api/users/login\"),userData);if(response.data.token){localStorage.setItem(\"token\",response.data.token);localStorage.setItem(\"user\",JSON.stringify(response.data.user));}return response;};// ƒêƒÉng xu·∫•t\nexport const logoutUser=()=>{localStorage.removeItem(\"token\");localStorage.removeItem(\"user\");};// ===============================\n// üêæ PET APIs\n// ===============================\n// Helper ƒë·ªÉ g·ª≠i token\nconst getAuthHeader=()=>{const token=localStorage.getItem(\"token\");if(!token){throw new Error(\"No authentication token found!\");}return{headers:{Authorization:\"Bearer \".concat(token)}};};// L·∫•y danh s√°ch pet c·ªßa user hi·ªán t·∫°i\nexport const getPetsByUser=async()=>axios.get(\"\".concat(API_URL,\"/api/pets/my-pets\"),getAuthHeader());// T·∫°o pet m·ªõi\nexport const addPet=async petData=>axios.post(\"\".concat(API_URL,\"/api/pets\"),petData,getAuthHeader());// L·∫•y chi ti·∫øt 1 pet (ch·ªâ owner th·∫•y)\nexport const getPetById=async petId=>axios.get(\"\".concat(API_URL,\"/api/pets/\").concat(petId),getAuthHeader());// X√≥a pet\nexport const deletePet=async petId=>axios.delete(\"\".concat(API_URL,\"/api/pets/\").concat(petId),getAuthHeader());// ===============================\n// üìà PET DATA APIs\n// ===============================\nexport const getLatestPetData=async petId=>axios.get(\"\".concat(API_URL,\"/api/petData/pet/\").concat(petId,\"/latest\"),getAuthHeader());export const getAllPetData=async petId=>axios.get(\"\".concat(API_URL,\"/api/petData/pet/\").concat(petId),getAuthHeader());// ===============================\n// üì± DEVICE APIs\n// ===============================\n// ƒêƒÉng k√Ω device v·ªõi pet\nexport const registerDevice=async(deviceId,petId)=>axios.post(\"\".concat(API_URL,\"/api/devices/register\"),{deviceId,petId},getAuthHeader());// L·∫•y danh s√°ch devices c·ªßa user\nexport const getMyDevices=async()=>axios.get(\"\".concat(API_URL,\"/api/devices/my-devices\"),getAuthHeader());// L·∫•y th√¥ng tin pet t·ª´ deviceId (cho ESP32)\nexport const getPetByDevice=async deviceId=>axios.get(\"\".concat(API_URL,\"/api/devices/pet/\").concat(deviceId));// ===============================\n// üß© AXIOS INTERCEPTOR\n// ===============================\naxios.interceptors.response.use(response=>response,error=>{var _error$response;if(((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status)===401){console.warn(\"‚ö†Ô∏è Token expired or invalid. Logging out...\");logoutUser();window.location.href=\"/login\";}return Promise.reject(error);});","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}