{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\LENOVO\\\\Downloads\\\\front2\\\\src\\\\components\\\\AlertSystem.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport { toast } from \"react-toastify\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function AlertSystem({\n  petData,\n  selectedPet\n}) {\n  _s();\n  const [alerts, setAlerts] = useState([]);\n  useEffect(() => {\n    if (petData && petData.length > 0) {\n      checkAlerts(petData[0]);\n    }\n  }, [petData]);\n  const checkAlerts = latestData => {\n    const newAlerts = [];\n\n    // Ki·ªÉm tra pin y·∫øu\n    if (latestData.batteryLevel < 20) {\n      newAlerts.push({\n        type: \"battery\",\n        message: `Pin th·∫•p: ${latestData.batteryLevel}%`,\n        level: \"warning\"\n      });\n    }\n\n    // Ki·ªÉm tra ra kh·ªèi v√πng an to√†n (demo)\n    const safeZoneCenter = [10.8231, 106.6297];\n    const distance = calculateDistance(safeZoneCenter[0], safeZoneCenter[1], latestData.latitude, latestData.longitude);\n    if (distance > 0.5) {\n      newAlerts.push({\n        type: \"location\",\n        message: \"Pet ra kh·ªèi v√πng an to√†n!\",\n        level: \"danger\"\n      });\n    }\n\n    // Hi·ªÉn th·ªã alert m·ªõi\n    newAlerts.forEach(alert => {\n      if (!alerts.find(a => a.type === alert.type && a.message === alert.message)) {\n        toast[alert.level === \"danger\" ? \"error\" : \"warning\"](alert.message);\n        setAlerts(prev => [...prev, {\n          ...alert,\n          id: Date.now()\n        }]);\n      }\n    });\n  };\n  const calculateDistance = (lat1, lon1, lat2, lon2) => {\n    const R = 6371;\n    const dLat = (lat2 - lat1) * Math.PI / 180;\n    const dLon = (lon2 - lon1) * Math.PI / 180;\n    const a = Math.sin(dLat / 2) * Math.sin(dLat / 2) + Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) * Math.sin(dLon / 2) * Math.sin(dLon / 2);\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    return R * c;\n  };\n  const removeAlert = id => {\n    setAlerts(prev => prev.filter(alert => alert.id !== id));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"alert-system\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"\\uD83D\\uDEA8 Th\\xF4ng b\\xE1o\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this), alerts.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        textAlign: \"center\",\n        padding: \"40px 20px\",\n        color: \"#718096\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontSize: \"3rem\",\n          marginBottom: \"10px\"\n        },\n        children: \"\\u2705\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Kh\\xF4ng c\\xF3 c\\u1EA3nh b\\xE1o n\\xE0o\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          fontSize: \"14px\",\n          marginTop: \"5px\"\n        },\n        children: \"M\\u1ECDi th\\u1EE9 \\u0111\\u1EC1u \\u1ED5n \\u0111\\u1ECBnh\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: \"flex\",\n        flexDirection: \"column\",\n        gap: \"12px\"\n      },\n      children: alerts.map(alert => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `alert-item ${alert.level === \"danger\" ? \"alert-danger\" : \"alert-warning\"}`,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"alert-message\",\n            children: alert.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"alert-time\",\n            children: new Date().toLocaleTimeString()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => removeAlert(alert.id),\n          className: \"alert-close\",\n          children: \"\\u2715\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 15\n        }, this)]\n      }, alert.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 5\n  }, this);\n}\n_s(AlertSystem, \"Qb5EisKOhIw7EOlQrlFVKt4OMUo=\");\n_c = AlertSystem;\nvar _c;\n$RefreshReg$(_c, \"AlertSystem\");","map":{"version":3,"names":["useState","useEffect","toast","jsxDEV","_jsxDEV","AlertSystem","petData","selectedPet","_s","alerts","setAlerts","length","checkAlerts","latestData","newAlerts","batteryLevel","push","type","message","level","safeZoneCenter","distance","calculateDistance","latitude","longitude","forEach","alert","find","a","prev","id","Date","now","lat1","lon1","lat2","lon2","R","dLat","Math","PI","dLon","sin","cos","c","atan2","sqrt","removeAlert","filter","className","children","fileName","_jsxFileName","lineNumber","columnNumber","style","textAlign","padding","color","fontSize","marginBottom","marginTop","display","flexDirection","gap","map","toLocaleTimeString","onClick","_c","$RefreshReg$"],"sources":["C:/Users/LENOVO/Downloads/front2/src/components/AlertSystem.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nexport default function AlertSystem({ petData, selectedPet }) {\r\n  const [alerts, setAlerts] = useState([]);\r\n\r\n  useEffect(() => {\r\n    if (petData && petData.length > 0) {\r\n      checkAlerts(petData[0]);\r\n    }\r\n  }, [petData]);\r\n\r\n  const checkAlerts = (latestData) => {\r\n    const newAlerts = [];\r\n\r\n    // Ki·ªÉm tra pin y·∫øu\r\n    if (latestData.batteryLevel < 20) {\r\n      newAlerts.push({\r\n        type: \"battery\",\r\n        message: `Pin th·∫•p: ${latestData.batteryLevel}%`,\r\n        level: \"warning\",\r\n      });\r\n    }\r\n\r\n    // Ki·ªÉm tra ra kh·ªèi v√πng an to√†n (demo)\r\n    const safeZoneCenter = [10.8231, 106.6297];\r\n    const distance = calculateDistance(\r\n      safeZoneCenter[0],\r\n      safeZoneCenter[1],\r\n      latestData.latitude,\r\n      latestData.longitude\r\n    );\r\n\r\n    if (distance > 0.5) {\r\n      newAlerts.push({\r\n        type: \"location\",\r\n        message: \"Pet ra kh·ªèi v√πng an to√†n!\",\r\n        level: \"danger\",\r\n      });\r\n    }\r\n\r\n    // Hi·ªÉn th·ªã alert m·ªõi\r\n    newAlerts.forEach((alert) => {\r\n      if (\r\n        !alerts.find(\r\n          (a) => a.type === alert.type && a.message === alert.message\r\n        )\r\n      ) {\r\n        toast[alert.level === \"danger\" ? \"error\" : \"warning\"](alert.message);\r\n        setAlerts((prev) => [...prev, { ...alert, id: Date.now() }]);\r\n      }\r\n    });\r\n  };\r\n\r\n  const calculateDistance = (lat1, lon1, lat2, lon2) => {\r\n    const R = 6371;\r\n    const dLat = ((lat2 - lat1) * Math.PI) / 180;\r\n    const dLon = ((lon2 - lon1) * Math.PI) / 180;\r\n    const a =\r\n      Math.sin(dLat / 2) * Math.sin(dLat / 2) +\r\n      Math.cos((lat1 * Math.PI) / 180) *\r\n        Math.cos((lat2 * Math.PI) / 180) *\r\n        Math.sin(dLon / 2) *\r\n        Math.sin(dLon / 2);\r\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\r\n    return R * c;\r\n  };\r\n\r\n  const removeAlert = (id) => {\r\n    setAlerts((prev) => prev.filter((alert) => alert.id !== id));\r\n  };\r\n\r\n  return (\r\n    <div className=\"alert-system\">\r\n      <h2>üö® Th√¥ng b√°o</h2>\r\n\r\n      {alerts.length === 0 ? (\r\n        <div\r\n          style={{\r\n            textAlign: \"center\",\r\n            padding: \"40px 20px\",\r\n            color: \"#718096\",\r\n          }}\r\n        >\r\n          <div style={{ fontSize: \"3rem\", marginBottom: \"10px\" }}>‚úÖ</div>\r\n          <p>Kh√¥ng c√≥ c·∫£nh b√°o n√†o</p>\r\n          <p style={{ fontSize: \"14px\", marginTop: \"5px\" }}>\r\n            M·ªçi th·ª© ƒë·ªÅu ·ªïn ƒë·ªãnh\r\n          </p>\r\n        </div>\r\n      ) : (\r\n        <div style={{ display: \"flex\", flexDirection: \"column\", gap: \"12px\" }}>\r\n          {alerts.map((alert) => (\r\n            <div\r\n              key={alert.id}\r\n              className={`alert-item ${\r\n                alert.level === \"danger\" ? \"alert-danger\" : \"alert-warning\"\r\n              }`}\r\n            >\r\n              <div>\r\n                <div className=\"alert-message\">{alert.message}</div>\r\n                <div className=\"alert-time\">\r\n                  {new Date().toLocaleTimeString()}\r\n                </div>\r\n              </div>\r\n              <button\r\n                onClick={() => removeAlert(alert.id)}\r\n                className=\"alert-close\"\r\n              >\r\n                ‚úï\r\n              </button>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}